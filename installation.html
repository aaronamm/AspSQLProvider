<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Installation
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="NauckIT.PostgreSQLProvider is a PostgreSQL implementation of the ASP.NET 2.0+ Membership, Role, Profile and Session-State Store Provider."/>
    <meta name="author" content="Daniel Nauck"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/AspSQLProvider/content/style.css" />
    <script type="text/javascript" src="/AspSQLProvider/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://www.nauck-it.de">Nauck IT KG</a></li>
          <li><a href="http://github.com/dnauck/AspSQLProvider">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/AspSQLProvider/index.html">NauckIT.PostgreSQLProvider</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1>Installation</h1>

<p>How to install and run the AspSQLProvider.</p>

<h2>Requirements</h2>

<ul>
<li>at least .NET 2.0 or Mono >= 1.2.4</li>
<li><a href="http://pgfoundry.org/projects/npgsql">Npgsql</a></li>
<li><a href="http://www.postgresql.org/">PostgreSQL</a> Server</li>
</ul>

<h2>Download</h2>

<h3>Download via NuGet</h3>

<p><a href="https://www.nuget.org/packages/NauckIT.PostgreSQLProvider/"><img src="http://img.shields.io/nuget/v/NauckIT.PostgreSQLProvider.svg?style=flat" alt="NuGet Status" /></a></p>

<p>To install the <a href="http://nuget.org/List/Packages/NauckIT.PostgreSQLProvider">NuGet Package</a>, run the following command in the Package Manager Console:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="i">PM</span><span class="o">&gt;</span> <span class="i">Install</span><span class="o">-</span><span class="i">Package</span> <span class="i">NauckIT</span><span class="o">.</span><span class="i">PostgreSQLProvider</span></pre>
</td>
</tr>
</table>

<h3>Latest Development Source Code</h3>

<p>We use <a href="http://www.git-scm.com/">Git</a> for source revision control and code sharing.</p>

<p>The Git repository is located at:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="i">http</span><span class="o">:</span><span class="c">//github.com/dnauck/AspSQLProvider</span></pre>
</td>
</tr>
</table>

<p>The latest source can be checked out with the following command:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="i">git</span> <span class="i">clone</span> <span class="i">https</span><span class="o">:</span><span class="c">//github.com/dnauck/AspSQLProvider.git</span></pre>
</td>
</tr>
</table>

<p>Run the build script <code>build.cmd</code> on Windows or <code>build.sh</code> on Unix.</p>

<h2>Setup</h2>

<p>1.) Copy the <code>NauckIT.PostgreSQLProvider.dll</code> into the ~/Bin directory of your Web Application.</p>

<p>2.) Add the PostgreSQL connection string into you Web.config, e.g.:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="o">&lt;</span><span class="i">connectionStrings</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="i">clear</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">name</span><span class="o">=</span><span class="s">&quot;</span><span class="s">AspSQLProvider</span><span class="s">&quot;</span> <span class="i">connectionString</span><span class="o">=</span><span class="s">&quot;</span><span class="s">Server</span><span class="s">=</span><span class="s">localhost</span><span class="s">;</span><span class="s">Port</span><span class="s">=</span><span class="s">5432</span><span class="s">;</span><span class="s">Database</span><span class="s">=</span><span class="s">website_user</span><span class="s">;</span><span class="s">User</span><span class="s"> </span><span class="s">Id</span><span class="s">=</span><span class="s">username</span><span class="s">;</span><span class="s">Password</span><span class="s">=</span><span class="s">mypassword</span><span class="s">;</span><span class="s">Encoding</span><span class="s">=</span><span class="s">UNICODE</span><span class="s">;</span><span class="s">Sslmode</span><span class="s">=</span><span class="s">Prefer</span><span class="s">;</span><span class="s">Pooling</span><span class="s">=</span><span class="s">true</span><span class="s">;</span><span class="s">&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="i">connectionStrings</span><span class="o">&gt;</span></pre>
</td>
</tr>
</table>

<p>3.) Add and enable the AspSQLProvider in your Web.config, e.g.:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="o">&lt;</span><span class="i">authentication</span> <span class="i">mode</span><span class="o">=</span><span class="s">&quot;</span><span class="s">Forms</span><span class="s">&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="i">forms</span> <span class="i">name</span><span class="o">=</span><span class="s">&quot;</span><span class="s">.</span><span class="s">AspNetAuth</span><span class="s">&quot;</span> <span class="i">protection</span><span class="o">=</span><span class="s">&quot;</span><span class="s">All</span><span class="s">&quot;</span> <span class="i">defaultUrl</span><span class="o">=</span><span class="s">&quot;</span><span class="s">~</span><span class="s">/</span><span class="s">Default</span><span class="s">.</span><span class="s">aspx</span><span class="s">&quot;</span> 
        <span class="i">loginUrl</span><span class="o">=</span><span class="s">&quot;</span><span class="s">~</span><span class="s">/</span><span class="s">Login</span><span class="s">.</span><span class="s">aspx</span><span class="s">&quot;</span> <span class="i">timeout</span><span class="o">=</span><span class="s">&quot;</span><span class="s">30</span><span class="s">&quot;</span> <span class="i">path</span><span class="o">=</span><span class="s">&quot;</span><span class="s">/</span><span class="s">&quot;</span> <span class="i">requireSSL</span><span class="o">=</span><span class="s">&quot;</span><span class="s">false</span><span class="s">&quot;</span> 
        <span class="i">slidingExpiration</span><span class="o">=</span><span class="s">&quot;</span><span class="s">true</span><span class="s">&quot;</span> <span class="i">enableCrossAppRedirects</span><span class="o">=</span><span class="s">&quot;</span><span class="s">false</span><span class="s">&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="i">authentication</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="i">machineKey</span> <span class="i">validationKey</span><span class="o">=</span><span class="s">&quot;</span><span class="s">518</span><span class="s">A9D0E650ACE4CB22A35DA4563315098A96D0BB8E357531C7065D032099214A11D1CA074B6D66FF0836B35CEAAD0E7EEEFAED772754832E0A5F94EF8522222</span><span class="s">&quot;</span>
    <span class="i">decryptionKey</span><span class="o">=</span><span class="s">&quot;</span><span class="s">DB5660C109E9EC70F044BA1FED99DE0C5922321C5125E84C23A1B5CA0E426909</span><span class="s">&quot;</span>
    <span class="i">validation</span><span class="o">=</span><span class="s">&quot;</span><span class="s">SHA1</span><span class="s">&quot;</span> <span class="i">decryption</span><span class="o">=</span><span class="s">&quot;</span><span class="s">AES</span><span class="s">&quot;</span> <span class="o">/&gt;</span>

<span class="o">&lt;</span><span class="i">membership</span> <span class="i">defaultProvider</span><span class="o">=</span><span class="s">&quot;</span><span class="s">PgMembershipProvider</span><span class="s">&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="i">providers</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="i">clear</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="i">add</span> <span class="i">name</span><span class="o">=</span><span class="s">&quot;</span><span class="s">PgMembershipProvider</span><span class="s">&quot;</span> <span class="k">type</span><span class="o">=</span><span class="s">&quot;</span><span class="s">NauckIT</span><span class="s">.</span><span class="s">PostgreSQLProvider</span><span class="s">.</span><span class="s">PgMembershipProvider</span><span class="s">&quot;</span> <span class="i">connectionStringName</span><span class="o">=</span><span class="s">&quot;</span><span class="s">AspSQLProvider</span><span class="s">&quot;</span> <span class="i">enablePasswordRetrieval</span><span class="o">=</span><span class="s">&quot;</span><span class="s">false</span><span class="s">&quot;</span> <span class="i">enablePasswordReset</span><span class="o">=</span><span class="s">&quot;</span><span class="s">true</span><span class="s">&quot;</span> <span class="i">requiresQuestionAndAnswer</span><span class="o">=</span><span class="s">&quot;</span><span class="s">true</span><span class="s">&quot;</span> <span class="i">passwordFormat</span><span class="o">=</span><span class="s">&quot;</span><span class="s">Hashed</span><span class="s">&quot;</span> <span class="i">applicationName</span><span class="o">=</span><span class="s">&quot;</span><span class="s">WebSite1</span><span class="s">&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="i">providers</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="i">membership</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="i">roleManager</span> <span class="i">enabled</span><span class="o">=</span><span class="s">&quot;</span><span class="s">true</span><span class="s">&quot;</span> <span class="i">defaultProvider</span><span class="o">=</span><span class="s">&quot;</span><span class="s">PgRoleProvider</span><span class="s">&quot;</span> <span class="i">cacheRolesInCookie</span><span class="o">=</span><span class="s">&quot;</span><span class="s">true</span><span class="s">&quot;</span> <span class="i">cookieName</span><span class="o">=</span><span class="s">&quot;</span><span class="s">.</span><span class="s">AspNetRoles</span><span class="s">&quot;</span> <span class="i">cookiePath</span><span class="o">=</span><span class="s">&quot;</span><span class="s">/</span><span class="s">&quot;</span> <span class="i">cookieProtection</span><span class="o">=</span><span class="s">&quot;</span><span class="s">All</span><span class="s">&quot;</span> <span class="i">cookieRequireSSL</span><span class="o">=</span><span class="s">&quot;</span><span class="s">false</span><span class="s">&quot;</span> <span class="i">cookieSlidingExpiration</span><span class="o">=</span><span class="s">&quot;</span><span class="s">true</span><span class="s">&quot;</span> <span class="i">createPersistentCookie</span><span class="o">=</span><span class="s">&quot;</span><span class="s">false</span><span class="s">&quot;</span> <span class="i">cookieTimeout</span><span class="o">=</span><span class="s">&quot;</span><span class="s">30</span><span class="s">&quot;</span> <span class="i">maxCachedResults</span><span class="o">=</span><span class="s">&quot;</span><span class="s">25</span><span class="s">&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="i">providers</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="i">clear</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="i">add</span> <span class="i">name</span><span class="o">=</span><span class="s">&quot;</span><span class="s">PgRoleProvider</span><span class="s">&quot;</span> <span class="k">type</span><span class="o">=</span><span class="s">&quot;</span><span class="s">NauckIT</span><span class="s">.</span><span class="s">PostgreSQLProvider</span><span class="s">.</span><span class="s">PgRoleProvider</span><span class="s">&quot;</span> <span class="i">connectionStringName</span><span class="o">=</span><span class="s">&quot;</span><span class="s">AspSQLProvider</span><span class="s">&quot;</span> <span class="i">applicationName</span><span class="o">=</span><span class="s">&quot;</span><span class="s">WebSite1</span><span class="s">&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="i">providers</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="i">roleManager</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="i">profile</span> <span class="i">enabled</span><span class="o">=</span><span class="s">&quot;</span><span class="s">true</span><span class="s">&quot;</span> <span class="i">defaultProvider</span><span class="o">=</span><span class="s">&quot;</span><span class="s">PgProfileProvider</span><span class="s">&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="i">providers</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="i">clear</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="i">add</span> <span class="i">name</span><span class="o">=</span><span class="s">&quot;</span><span class="s">PgProfileProvider</span><span class="s">&quot;</span> <span class="k">type</span><span class="o">=</span><span class="s">&quot;</span><span class="s">NauckIT</span><span class="s">.</span><span class="s">PostgreSQLProvider</span><span class="s">.</span><span class="s">PgProfileProvider</span><span class="s">&quot;</span> <span class="i">connectionStringName</span><span class="o">=</span><span class="s">&quot;</span><span class="s">AspSQLProvider</span><span class="s">&quot;</span> <span class="i">applicationName</span><span class="o">=</span><span class="s">&quot;</span><span class="s">WebSite1</span><span class="s">&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="i">providers</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="i">properties</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="i">add</span> <span class="i">name</span><span class="o">=</span><span class="s">&quot;</span><span class="s">FirstName</span><span class="s">&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="i">add</span> <span class="i">name</span><span class="o">=</span><span class="s">&quot;</span><span class="s">LastName</span><span class="s">&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="i">properties</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="i">profile</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="i">sessionState</span>   <span class="i">mode</span><span class="o">=</span><span class="s">&quot;</span><span class="s">Custom</span><span class="s">&quot;</span>   <span class="i">customProvider</span><span class="o">=</span><span class="s">&quot;</span><span class="s">PgSessionStateStoreProvider</span><span class="s">&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="i">providers</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="i">clear</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="i">add</span> <span class="i">name</span><span class="o">=</span><span class="s">&quot;</span><span class="s">PgSessionStateStoreProvider</span><span class="s">&quot;</span> <span class="k">type</span><span class="o">=</span><span class="s">&quot;</span><span class="s">NauckIT</span><span class="s">.</span><span class="s">PostgreSQLProvider</span><span class="s">.</span><span class="s">PgSessionStateStoreProvider</span><span class="s">&quot;</span> <span class="i">enableExpiredSessionAutoDeletion</span><span class="o">=</span><span class="s">&quot;</span><span class="s">true</span><span class="s">&quot;</span> <span class="i">expiredSessionAutoDeletionInterval</span><span class="o">=</span><span class="s">&quot;</span><span class="s">60000</span><span class="s">&quot;</span> <span class="i">enableSessionExpireCallback</span><span class="o">=</span><span class="s">&quot;</span><span class="s">false</span><span class="s">&quot;</span> <span class="i">connectionStringName</span><span class="o">=</span><span class="s">&quot;</span><span class="s">AspSQLProvider</span><span class="s">&quot;</span> <span class="i">applicationName</span><span class="o">=</span><span class="s">&quot;</span><span class="s">WebSite1</span><span class="s">&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="i">providers</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="i">sessionState</span><span class="o">&gt;</span></pre>
</td>
</tr>
</table>

<p><strong>Warning:</strong> use your own machineKey for security reasons. <a href="http://www.leastprivilege.com/MSDNUSWebCastAuthenticationAndAuthorizationWithASPNET20.aspx">Here</a> is a nice tool for generating keys inside the slides zip file, called GenerateMachineKey.</p>

<p>4.) Create the PostgreSQL database schema with the provided DatabaseSchema.sql script.</p>

<p>5.) After creating the tables, double check the global schema search path and make sure the schema in which you placed the tables is referenced in the current search path. If not, edit the global config file, add the schema to the search path, and restart the postgres server. Otherwise, the ASP.NET configuration will not be able to find the tables.</p>


        </div>
        <div class="span3">
          <img src="/AspSQLProvider/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">NauckIT.PostgreSQLProvider</li>
            <li><a href="/AspSQLProvider/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/NauckIT.PostgreSQLProvider">Get Library via NuGet</a></li>
            <li><a href="http://github.com/dnauck/AspSQLProvider">Source Code on GitHub</a></li>
            <li><a href="/AspSQLProvider/license.html">License</a></li>
            <li><a href="/AspSQLProvider/release-notes.html">Release Notes</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/AspSQLProvider/installation.html">Installation</a></li>
            <li><a href="/AspSQLProvider/configuration.html">Configuration</a></li>
            <li><a href="/AspSQLProvider/debugging.html">Debugging</a></li>
            <li><a href="/AspSQLProvider/reference/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/dnauck/AspSQLProvider"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
